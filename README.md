# 6MWT Quick Logger

## プロジェクト概要
- **目的**: 病棟で行う 6 分間歩行試験（6MWT）の測定値を、片手操作で途切れなく記録できるスマートフォン最適化ウェブアプリとして提供します。
- **主要機能**: SpO₂・脈拍・歩行距離・Borg を 2×2 の色分けパネルで常時表示し、6 分経過後は基準 SpO₂ と回復時間入力ビューへ自動遷移。数値はネイティブの数値キーボードで即入力でき、ストップウォッチと決定ボタンを同一画面に固定しながら 0:55〜1:25 などの各分ウィンドウで「◯分目の入力」を促します。

## 実装済み機能
- 白背景×黒文字＋青/赤/緑/オレンジのパネルによる高コントラスト UI。スマートフォン幅に最適化した 2×2 レイアウトで片手操作を想定
- パネルタップ直後に単一数値フィールドのモーダルが開き、SpO₂ などは iOS/Android のネイティブ数値キーボード（スピナー付き）で即入力／上書き可能
- 開始前に 4 指標すべての基準値（0 分値）を入力するまで Start ボタンが押せない安全設計。Start ボタンは Reset より一回り大きく視認性を確保
- Start/Pause/Resume/Restart を兼ねるストップウォッチと、右隣の「決定」ボタン、左隣の Reset（OK/キャンセル付き確認ダイアログ）を同一行に配置
- 0:55〜1:25 のような各分ウィンドウ中のみ「◯分目の入力」を表示し、1〜6 分の経過タイミングではミニトーストで入力を促進。記録済みの場合は青色表示となり、ウィンドウ外での決定は `(not the right time)` トーストを返し記録無効
- 決定操作は同一ウィンドウ中であれば上書き保存が可能。登録と同時に分バッジへ反映し、ToDo 状況を即時確認できます
- 6 分経過でタイマーは自動停止し「計測終了」を掲示。6 分目の記録完了後は 4 パネルを非表示にし、基準 SpO₂ 表示カードと回復時間入力カード（分/秒フィールド）へ自動切替
- 回復時間は分・秒ごとのバリデーション付きで保存でき、記録済みならトースト通知とともに最新値を保持
- 「記録を表示」ボタンから 0〜6 分の 4 指標推移と回復時間をまとめたシンプルな一覧表＋サマリーを閲覧可能
- Reset ボタンの下に配置した「使い方」リンクで usage.html（ガイドページ）へ移動し、施設向け運用メモを参照可能
- 最小値／最大値／小数桁チェックとトースト通知を備えたクライアントサイドバリデーション

## エントリーポイント
- `/index.html` – 6MWT 入力画面（単一ページアプリケーション）
- `/usage.html` – 使い方ガイド（運用手順・メモ追記用）

## データモデル / ストレージ
- クライアントメモリのみで動作し、`state.data[metric][minute]` に 0〜6 分の値、`state.currentValues` に最新入力、`state.recoveryTime` に回復時間（分・秒）を保持し、`state.minuteRecorded` で記録済みの分を管理
- 測定値の永続化・共有機能は未実装（必要に応じて Table API などの REST エンドポイントと接続可能）

## 未実装の機能
- 端末ローカルまたはサーバーへのデータ永続化／同期
- 計測完了後のサマリーレポート生成（CSV / PDF / 印刷レイアウト）
- バイブレーション・サウンドなどの物理的フィードバック
- 測定済みデータの追記・編集履歴や患者ごとの蓄積管理

## 推奨される次のステップ
1. Table API 等を用いた測定データの保存・一覧閲覧・再開機能の実装
2. 計測完了後に漏れを自動チェックするレビュー画面と、共有用サマリーの導線を追加
3. 分ごとのリマインダーを視覚 + 触覚（バイブレーション）で補強し、通知の見逃しを抑制
4. Borg スケールや距離入力のプリセット（テンプレート値）提供で入力負荷をさらに軽減
5. 文字サイズ調整・ダークモード・多言語対応などアクセシビリティ面の拡張

## 公開 URL
- 未公開（デプロイする場合は **Publish** タブから公開してください）

---
この README はアプリの現状と今後の拡張方針をまとめています。プロジェクト更新時には本ファイルも併せてメンテナンスしてください。
